(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b9211a2"],{2959:function(e,t,a){"use strict";var r=a("a96f"),l=a.n(r);l.a},"3f5e":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var r=a("b775"),l=function(e){return Object(r["a"])({url:"/file/fileList",method:"post",data:e})},o=function(e){return Object(r["a"])({url:"/file/saveFile",method:"post",data:e})},n=function(e){return Object(r["a"])({url:"/file/deleteFile",method:"post",data:e})}},"4b3b":function(e,t,a){var r={"./":"1e4b","./fileManage":"a294","./fileManage/":"a294","./fileManage/detail":"acce","./fileManage/detail.vue":"acce","./fileManage/index":"a294","./fileManage/index.vue":"a294","./index":"1e4b","./index.vue":"1e4b","./kanban":"c6b7","./kanban/":"c6b7","./kanban/ProjectAdd":"45ab","./kanban/ProjectAdd.vue":"45ab","./kanban/ProjectEdit":"8d90","./kanban/ProjectEdit.vue":"8d90","./kanban/ProjectfollowUp":"6119","./kanban/ProjectfollowUp.vue":"6119","./kanban/index":"c6b7","./kanban/index.vue":"c6b7","./kanban/recovery":"92fd","./kanban/recovery.vue":"92fd","./task":"c430b","./task/":"c430b","./task/detail":"5cbe","./task/detail.vue":"5cbe","./task/index":"c430b","./task/index.vue":"c430b"};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}l.keys=function(){return Object.keys(r)},l.resolve=o,e.exports=l,l.id="4b3b"},6119:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodySt"},[a("el-timeline",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],attrs:{"infinite-scroll-disabled":e.disabled}},[e._l(e.tableData,(function(t,r){return a("el-timeline-item",{key:r,attrs:{timestamp:t.time,placement:"top"}},[a("el-card",[a("el-table",{attrs:{data:t.data}},[a("el-table-column",{attrs:{"header-align":"center",label:"策划"}},[a("el-table-column",{attrs:{"header-align":"center",label:"任务分配"}},[a("el-table-column",{attrs:{label:"任务负责人","show-overflow-tooltip":"",prop:"1_task_username"}}),a("el-table-column",{attrs:{label:"任务模块","show-overflow-tooltip":"",prop:"1_module_name"}}),a("el-table-column",{attrs:{label:"详细任务","show-overflow-tooltip":"",prop:"1_task_name"}}),a("el-table-column",{attrs:{label:"完成状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.StateFormat(t.row["1_state"])))]}}],null,!0)})],1),a("el-table-column",{attrs:{"header-align":"center",label:"任务验收"}},[a("el-table-column",{attrs:{label:"验收人","show-overflow-tooltip":"",prop:"1_acceptor_username"}}),a("el-table-column",{attrs:{label:"验收状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.checkStateFormat(t.row["1_check"])))]}}],null,!0)}),a("el-table-column",{attrs:{label:"验收备注","show-overflow-tooltip":"",prop:"1_check_remark"}})],1)],1),a("el-table-column",{attrs:{"header-align":"center",label:"美术"}},[a("el-table-column",{attrs:{"header-align":"center",label:"任务分配"}},[a("el-table-column",{attrs:{label:"任务负责人","show-overflow-tooltip":"",prop:"2_task_username"}}),a("el-table-column",{attrs:{label:"任务模块","show-overflow-tooltip":"",prop:"2_module_name"}}),a("el-table-column",{attrs:{label:"详细任务","show-overflow-tooltip":"",prop:"2_task_name"}}),a("el-table-column",{attrs:{label:"完成状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.StateFormat(t.row["2_state"])))]}}],null,!0)})],1),a("el-table-column",{attrs:{"header-align":"center",label:"任务验收"}},[a("el-table-column",{attrs:{label:"验收人","show-overflow-tooltip":"",prop:"2_acceptor_username"}}),a("el-table-column",{attrs:{label:"验收状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.checkStateFormat(t.row["2_check"])))]}}],null,!0)}),a("el-table-column",{attrs:{label:"验收备注","show-overflow-tooltip":"",prop:"2_check_remark"}})],1)],1),a("el-table-column",{attrs:{"header-align":"center",label:"程序"}},[a("el-table-column",{attrs:{"header-align":"center",label:"任务分配"}},[a("el-table-column",{attrs:{label:"任务负责人","show-overflow-tooltip":"",prop:"3_task_username"}}),a("el-table-column",{attrs:{label:"任务模块","show-overflow-tooltip":"",prop:"3_module_name"}}),a("el-table-column",{attrs:{label:"详细任务","show-overflow-tooltip":"",prop:"3_task_name"}}),a("el-table-column",{attrs:{label:"完成状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.StateFormat(t.row["3_state"])))]}}],null,!0)})],1),a("el-table-column",{attrs:{"header-align":"center",label:"任务验收"}},[a("el-table-column",{attrs:{label:"验收人","show-overflow-tooltip":"",prop:"3_acceptor_username"}}),a("el-table-column",{attrs:{label:"验收状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.checkStateFormat(t.row["3_check"])))]}}],null,!0)}),a("el-table-column",{attrs:{label:"验收备注","show-overflow-tooltip":"",prop:"3_check_remark"}})],1)],1),a("el-table-column",{attrs:{"header-align":"center",label:"运营"}},[a("el-table-column",{attrs:{"header-align":"center",label:"任务分配"}},[a("el-table-column",{attrs:{label:"任务负责人","show-overflow-tooltip":"",prop:"4_task_username"}}),a("el-table-column",{attrs:{label:"任务模块","show-overflow-tooltip":"",prop:"4_module_name"}}),a("el-table-column",{attrs:{label:"详细任务","show-overflow-tooltip":"",prop:"4_task_name"}}),a("el-table-column",{attrs:{label:"完成状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.StateFormat(t.row["4_state"])))]}}],null,!0)})],1),a("el-table-column",{attrs:{"header-align":"center",label:"任务验收"}},[a("el-table-column",{attrs:{label:"验收人","show-overflow-tooltip":"",prop:"4_acceptor_username"}}),a("el-table-column",{attrs:{label:"验收状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.checkStateFormat(t.row["4_check"])))]}}],null,!0)}),a("el-table-column",{attrs:{label:"验收备注","show-overflow-tooltip":"",prop:"4_check_remark"}})],1)],1)],1)],1)],1)})),e.disabled?a("div",{staticClass:"notHave"},[e._v("没有更多了")]):e._e()],2)],1)},l=[],o=(a("ac1f"),a("841c"),a("6b75"));function n(e){if(Array.isArray(e))return Object(o["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function s(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var i=a("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return n(e)||s(e)||Object(i["a"])(e)||c()}a("96cf");var d=a("1da1"),f=a("24d2"),b={name:"followUp",mounted:function(){this.searchForm.project_id=this.$route.params.projectId,this.search()},data:function(){return{tableData:[],disabled:!1,searchForm:{project_id:"",page:1}}},methods:{search:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.disabled=!0,t.next=3,Object(f["e"])(e.searchForm);case 3:if(r=t.sent,e.disabled=!1,2e3!=r.code){t.next=8;break}return e.disabled=!0,t.abrupt("return");case 8:if(1e3==r.code){t.next=10;break}return t.abrupt("return",e.$message.error(r.msg));case 10:(a=e.tableData).push.apply(a,u(r.data));case 11:case"end":return t.stop()}}),t)})))()},checkStateFormat:function(e){var t="";switch(e){case 1:t="未验收";break;case 2:t="验收失败";break;case 3:t="验收通过";break;default:break}return t},StateFormat:function(e){var t="";switch(e){case 1:t="未开始";break;case 2:t="进行中";break;case 3:t="已完成";break;case 4:t="已延期";break;case 5:t="顺延中";break;default:break}return t},load:function(){this.searchForm.page++,this.disabled=!0,this.search()}}},m=b,p=(a("2959"),a("2877")),h=Object(p["a"])(m,r,l,!1,null,null,null);t["default"]=h.exports},"621c":function(e,t,a){"use strict";var r=a("cd75"),l=a.n(r);l.a},a294:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodySt"},[a("el-row",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"创建人:"}},[a("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.searchForm.create_name,callback:function(t){e.$set(e.searchForm,"create_name",t)},expression:"searchForm.create_name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.searchForm.remark,callback:function(t){e.$set(e.searchForm,"remark",t)},expression:"searchForm.remark"}})],1)],1),a("span",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.detail.dialogVisible=!0}}},[e._v("增加")])],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-table",{attrs:{data:e.tableDate,border:""}},[a("el-table-column",{attrs:{label:"文件名称",prop:"origin_name",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-icon-tickets"}),e._v(" "+e._s(t.row.origin_name)+" ")]}}])}),a("el-table-column",{attrs:{label:"大小",prop:"size",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatSzie(t.row.size)))]}}])}),a("el-table-column",{attrs:{label:"创建人",prop:"create_name",width:"100"}}),a("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatDate(t.row.create_time)))]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remark","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.see(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.deleteFile(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"footer-page"},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":[10,20,30,40],"page-size":e.searchForm.pageSize,layout:"total, sizes, prev, pager, next",total:e.searchForm.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("detail",{attrs:{dialogVisible:e.detail.dialogVisible,projectId:e.projectId},on:{handleClose:e.handleClose}})],1)},l=[],o=(a("a9e3"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),n=a("0feb"),s=a("3f5e"),i=a("b199"),c=a("acce"),u=(a("5a0c"),{name:"fileIndex",components:{detail:c["default"]},data:function(){return{projectId:null,searchForm:{task_name:"",task_type:"",page:1,pageSize:10,total:0},detail:{dialogVisible:!1},loading:!1,title:"添加",row:{},tableDate:[],project:{},user:{},taskTypeOpen:[]}},filters:{},methods:{handleClose:function(){this.detail.dialogVisible=!1,this.search()},see:function(e){window.open(e.url)},deleteFile:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["a"])(e);case 2:if(r=a.sent,1e3==r.code){a.next=5;break}return a.abrupt("return",t.$message.error(r.msg));case 5:t.$message.success(r.msg),t.search();case 7:case"end":return a.stop()}}),a)})))()},taskTypes:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])();case 2:if(a=t.sent,1e3==a.code){t.next=5;break}return t.abrupt("return",e.$message.error(a.msg));case 5:e.taskTypeOpen=a.data;case 6:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])(e.searchForm);case 2:if(a=t.sent,1e3==a.code){t.next=5;break}return t.abrupt("return",e.$message.error(a.msg));case 5:if(!(0==a.data.length&&a.total>0)){t.next=9;break}return e.searchForm.page=1,e.search(),t.abrupt("return");case 9:e.tableDate=a.data,e.searchForm.total=a.total;case 11:case"end":return t.stop()}}),t)})))()},formatSzie:function(e){return e>1048576?parseInt(e/1048576)+"MB":e>1024?parseInt(e/1024)+"KB":e},formatDate:function(e){if(e*=1e3,e){e=Number(e),e=new Date(e);var t=e.getFullYear()+"-",a=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=e.getDate()<10?"0"+e.getDate():e.getDate(),l=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",o=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return t+a+r+" "+l+o+n}return""},handleCurrentChange:function(e){this.searchForm.page=e,this.search()},handleSizeChange:function(e){this.searchForm.pageSize=e,this.search()},getUserinfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["c"])();case 2:a=t.sent,e.user=a.data;case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.search(),this.taskTypes()},created:function(){this.getUserinfo(),this.projectId=this.$route.params.projectId,this.searchForm.project_id=this.projectId}}),d=u,f=(a("fb13"),a("2877")),b=Object(f["a"])(d,r,l,!1,null,null,null);t["default"]=b.exports},a96f:function(e,t,a){},acce:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{center:"",title:e.title,visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},open:e.openDialog}},[a("el-form",[a("el-form-item",{attrs:{label:"文件"}},[a("el-upload",{staticClass:"file-uploader",attrs:{action:e.uploadFileUrl,headers:e.token,"on-success":e.onSuccess,"on-remove":e.onRemove,"file-list":e.fileList,"before-upload":e.beforeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件不超过20m")])],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("el-row",{staticClass:"buttomRow"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)},l=[],o=(a("4160"),a("a434"),a("159b"),a("96cf"),a("1da1")),n=(a("5a0c"),a("3f5e")),s=a("db49"),i=a("5f87"),c={name:"detail",props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:"添加"},projectId:{type:String,default:""},user:{type:Object,default:null}},data:function(){return{form:{project_id:this.projectId,remark:"",fileList:[]},fileList:[],uploadFileUrl:s["a"].baseUrl+"/upload/file",token:{token:Object(i["a"])()},fileUid:null}},methods:{beforeUpload:function(e){var t=20971520;if(e.size>t)return this.$message.warning("文件过大"),!1;this.fileUid=e.uid},onSuccess:function(e,t){1e3==e.code&&(e.data.id=this.fileUid,this.form.fileList.push(e.data)),this.fileUid=null},onRemove:function(e,t){var a=this;this.form.fileList.forEach((function(t,r){t.id!=e.uid||a.form.fileList.splice(r,1)}))},openDialog:function(){console.log("this.form.project_id",this.form.project_id)},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.form.fileList<1)){t.next=2;break}return t.abrupt("return",e.$message.warning("最少需要一个文件"));case 2:return t.next=4,Object(n["c"])(e.form);case 4:if(a=t.sent,1e3==a.code){t.next=7;break}return t.abrupt("return",e.$message.error(a.msg));case 7:e.$message.success(a.msg),e.handleClose();case 9:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.form={remark:"",fileList:[]},this.fileList=[],this.$emit("handleClose")}},mounted:function(){}},u=c,d=(a("621c"),a("2877")),f=Object(d["a"])(u,r,l,!1,null,null,null);t["default"]=f.exports},b8bf:function(e,t,a){},cd75:function(e,t,a){},fb13:function(e,t,a){"use strict";var r=a("b8bf"),l=a.n(r);l.a}}]);
//# sourceMappingURL=chunk-7b9211a2.6c70467d.js.map